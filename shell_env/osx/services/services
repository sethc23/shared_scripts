#!env zsh

function svc_softwareupdate_load() { \
    sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.softwareupdated.plist;\
    sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.softwareupdate_download_service.plist; }
function svc_softwareupdate_unload() { \
    sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.softwareupdated.plist;\
    sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.softwareupdate_download_service.plist; }

alias svc_bluetooth_disable='echo "admin" | sudo defaults write /Library/Preferences/com.apple.Bluetooth.plist ControllerPowerState 0'
alias svc_bluetooth_enable='echo "admin" | sudo defaults write /Library/Preferences/com.apple.Bluetooth.plist ControllerPowerState 1'
alias svc_ipy_load='sudo launchctl load -w /Library/LaunchDaemons/custom.ipython_launchctl.plist;'
alias svc_ipy_unload='sudo launchctl unload -w /Library/LaunchDaemons/custom.ipython_launchctl.plist;'
alias svc_locate_load='sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.locate.plist'
alias svc_locate_unload='sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.locate.plist'
alias svc_ng_load='ng_push_config; sudo launchctl load -w /Library/LaunchDaemons/custom.nginx.plist'
alias svc_ng_unload='sudo launchctl unload -w /Library/LaunchDaemons/custom.nginx.plist'
alias svc_pf_dir='cd /opt/local/etc/postfix/'
alias svc_pf_load='sudo port load postfix'
alias svc_pf_reload='pf_unload; pf_load;'
alias svc_pf_unload='sudo port unload postfix'
alias svc_pg_config2='sudo emacs /opt/local/var/db/postgresql95/defaultdb/postgresql.conf'
alias svc_pg_config='sudo emacs /opt/local/var/db/postgresql95/defaultdb/pg_hba.conf'
alias svc_pg_dump_all='/opt/local/lib/postgresql95/bin/pg_dump_put; pg_dump_rename'
alias svc_pg_dump_put='/opt/local/lib/postgresql95/bin/pg_dump --dbname=routing --host=0.0.0.0 --port=8800 --username=postgres > ~/.pg_dump/db.sql'
alias svc_pg_dump_rename='python $HOME/.scripts/api_pgsql.py rename_base_dump;'
alias svc_pg_kill='sudo kill -KILL $(cat $HOME/postgres/pgsql95.pid); sudo rm /opt/local/var/db/postgresql95/defaultdb/postmaster.pid'
alias svc_pg_load='pg_push_config; sudo launchctl load -w /Library/LaunchDaemons/custom.pg95.plist'
alias svc_pg_psql='/opt/local/lib/postgresql95/bin/psql -U postgres -h 0.0.0.0 --port=8800 routing'
alias svc_pg_push_config='$SERV_HOME/pgsql95/push_pg_config.bash'
alias svc_pg_restore='/opt/local/lib/postgresql95/bin/psql -U postgres -h 0.0.0.0 --port=8800 -d routing -f db.sql'
alias svc_pg_start='cd /tmp; sudo su postgres -c "/opt/local/lib/postgresql95/bin/pg_ctl start -D /opt/local/var/db/postgresql95/defaultdb"'
alias svc_pg_stop='sudo su postgres -c "/opt/local/lib/postgresql95/bin/pg_ctl stop -D /opt/local/var/db/postgresql95/defaultdb -m smart"'
alias svc_pg_stop_fast='sudo su postgres -c "/opt/local/lib/postgresql95/bin/pg_ctl stop -D /opt/local/var/db/postgresql95/defaultdb -m fast"'
alias svc_pg_unload='sudo launchctl unload -w /Library/LaunchDaemons/custom.pg95.plist'
alias svc_spotlight_load='sudo mdutil -a -i on; sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.metadata.mds.plist'
alias svc_spotlight_unload='sudo mdutil -a -i off; sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.metadata.mds.plist'
alias svc_sshd_load='sudo launchctl load -w /Library/LaunchDaemons/org.macports.OpenSSH.plist'
alias svc_sshd_restart='svc_sshd_unload && svc_sshd_load'
alias svc_sshd_restart_force='svc_sshd_unload; kill_by "sshd"; svc_sshd_load'
alias svc_sshd_unload='sudo launchctl unload -w /Library/LaunchDaemons/org.macports.OpenSSH.plist'
alias svc_sv_kill='sudo kill `cat $SERV_HOME/run/pids/sv_*.pid`'
alias svc_sv_status='svc_sv_ctl status'
alias svc_sv_tail='sudo tail -n 100 -f /var/log/syslogs/supervisor.log'
alias svc_sv_update='sudo supervisorctl -s unix:///var/sockets/supervisor_root.sock reread && sudo supervisorctl -s unix:///var/sockets/supervisor_root.sock update'
alias svc_svr_ctl='sudo supervisorctl -s unix:///var/sockets/supervisor_root.sock'
alias svc_svr_load='svc_svr_push_config; sudo launchctl load -w /Library/LaunchDaemons/custom.supervisord_root.plist'
alias svc_svr_push_config='$SERV_HOME/supervisor_root/push_sv_config.bash'
alias svc_svr_reload='svc_svr_unload; svc_svr_load;'
alias svc_svr_reset='svc_svr_push_config && svc_svr_ctl reread && svc_svr_ctl update'
alias svc_svr_test='svc_ng_kill; svc_svr_push_config; sudo /opt/local/Library/Frameworks/Python.framework/Versions/Current/bin/supervisord -c /etc/supervisor/conf.d/supervisord.conf'
alias svc_svr_unload='sudo launchctl unload -w /Library/LaunchDaemons/custom.supervisord_root.plist'
alias svc_syslogd_custom_load='sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.syslogd2.plist; sudo launchctl start custom.syslogd'
alias svc_syslogd_custom_unload='sudo launchctl unload -w -F /System/Library/LaunchDaemons/com.apple.syslogd2.plist; sudo launchctl stop custom.syslogd'
alias svc_syslogd_standard_load='sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.syslogd3.plist'
alias svc_syslogd_standard_unload='sudo launchctl unload -w -F /System/Library/LaunchDaemons/com.apple.syslogd3.plist'
